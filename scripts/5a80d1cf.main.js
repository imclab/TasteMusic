!function(a,b){"use strict";b.app=b.app||{},b.$=document.querySelectorAll.bind(document),b.$$=document.querySelector.bind(document);{var c=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?$","i");app.http={get:function(a){var c,d=a.url+(/\?/.test(a.url)?"&":"?")+ +new Date;if(!b.XMLHttpRequest)throw new Error("Your browser doesn't support the XMLHttpRequest object!");c=new XMLHttpRequest,c.addEventListener("readystatechange",function(){4===c.readyState&&(200===c.status?a.success(c.responseText,c.status,c.statusText):a.error(c,c.status,c.statusText))},!1),c.open("GET",d,!0),c.send(null)}},app.regex={newline:/\r\n/,space:/\s/,weburl:c}}}(_,window),function(a,b){"use strict";function c(a){g=document.createElement("li"),g.innerHTML='<a href="'+a+'" target="_blank">'+a+"</a>",h.htmlList.appendChild(g)}function d(a){i(a,"soundcloud.com")?h.hash.soundcloud.push(a):i(a,["youtube.com","youtu.be"])?h.hash.youtube.push(a):h.hash.other.push(a)}function e(a){d(a),c(a)}function f(a){this.options=a,this.comments=null}var g,h={htmlList:document.createElement("ol"),array:[],hash:{soundcloud:[],youtube:[],other:[]}},i=function(b,c){var d=!1,b=b.toLowerCase();return a.isString(c)?b.indexOf(c)>1?!0:!1:(a.each(c,function(a){b.indexOf(a)>1&&(d=!0)}),d)};f.prototype={constructor:f,parse:function(){this.getPage()},parseAll:function(){},getPage:function(a){var b=this,c=b.options.url;a&&(c+="?page="+a),app.http.get({url:c,success:function(a,c){a&&200===c&&(b.comments=JSON.parse(a),b.comments.length>0?b.build():b.options.fail("No more links are available."))},error:function(a,c,d){b.options.fail(c+" "+d)}})},collectUrls:function(b){var c=[],d=[],e=[];return c=b.split(app.regex.newline),a.each(a.compact(c),function(a){d.push(a.split(app.regex.space))}),e=a.chain(d).flatten().filter(function(a){return app.regex.weburl.test(a)}).value()},build:function(){var b,c=this,d=0,f=c.comments.length;a.each(c.comments,function(g){return b=c.collectUrls(g.body),h.array=h.array.concat(b),a.each(b,e),d+=1,d==f?void c.complete():void 0})},complete:function(){console.log("Parsed URLs from "+this.comments.length+" comments!"),this.options.done(h)}},b.app.CommentsParser=f}(_,window),function(a){"use strict";function b(b){b&&a.isObject(b)&&(d.innerHTML=b.htmlList.outerHTML,console.log(b))}function c(a){a&&(d.innerHTML=a)}var d=document.getElementById("shared-links");new app.CommentsParser({url:"https://api.github.com/repos/tastejs/TasteMusic/issues/1/comments",done:b,fail:c}).parse()}(_,window);