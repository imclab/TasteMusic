!function(a,b){"use strict";b.app=b.app||{},b.$=document.querySelectorAll.bind(document),b.$$=document.querySelector.bind(document);var c=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?$","i");b.app.http={get:function(a){var c,d=a.url+(/\?/.test(a.url)?"&":"?")+ +new Date;if(!b.XMLHttpRequest)throw new Error("Your browser doesn't support the XMLHttpRequest object!");c=new XMLHttpRequest,c.addEventListener("readystatechange",function(){4===c.readyState&&(200===c.status?a.success(c.responseText,c.status,c.statusText):a.error(c,c.status,c.statusText))},!1),c.open("GET",d,!0),c.send(null)}},b.app.regex={newline:/\r\n/,space:/\s/,weburl:c}}(_,window),function(a,b){"use strict";function c(a){g=document.createElement("li"),g.innerHTML='<a href="'+a+'" target="_blank" class="track">'+a+"</a>",i.htmlList.appendChild(g)}function d(a){j(a,"soundcloud.com")?i.hash.soundcloud.push(a):j(a,["youtube.com","youtu.be"])?i.hash.youtube.push(a):i.hash.other.push(a)}function e(a){d(a),c(a)}function f(a){this.options=a,this.comments=null}var g,h=b.app,i={htmlList:document.createElement("ol"),array:[],hash:{soundcloud:[],youtube:[],other:[]}},j=function(b,c){var d=!1,e=b.toLowerCase();return a.isString(c)?e.indexOf(c)>1?!0:!1:(a.each(c,function(a){e.indexOf(a)>1&&(d=!0)}),d)};f.prototype={constructor:f,parse:function(){this.getPage()},parseAll:function(){},getPage:function(a){var b=this,c=b.options.url;a&&(c+="?page="+a),new h.http.get({url:c,success:function(a,c,d){a&&200===c&&(b.comments=JSON.parse(a),b.comments.length>0?b.build():b.options.fail("No more links are available. "+d))},error:function(a,c,d){b.comments=[],b.build(),b.options.fail(c+" "+d)}})},collectUrls:function(b){var c=[],d=[],e=[];return c=b.split(h.regex.newline),a.each(a.compact(c),function(a){d.push(a.split(h.regex.space))}),e=a.chain(d).flatten().filter(function(a){return h.regex.weburl.test(a)}).value()},build:function(){var b,c=this,d=0,f=c.comments.length;a.each(c.comments,function(g){return b=c.collectUrls(g.body),i.array=i.array.concat(b),a.each(b,e),d+=1,d===f?void c.complete():void 0})},complete:function(){console.log("Parsed URLs from "+this.comments.length+" comments!"),this.options.done(i)}},b.app.CommentsParser=f}(_,window),function(a,b,c,d){function e(){}var f=b.app,g=b.jQuery,h="6aeb01b043ebc13df5e211ab3187464f",i=[];d.initialize({client_id:h});var j=function(a,b){d.get("/resolve.json",{url:a},b)};e.playTrack=function(a,b){var c=this,e=a.url;j(e,function(a){console.log(a),d.stream("/tracks/"+a.id,function(a){return c.stopAllSounds(),i.push(a),a.play(),b&&b()})})},e.stopAllSounds=function(){for(var a=0,b=i.length;b>a;a++)i[a].stop()},e.updatePlaylist=function(){g(".track").click(function(a){console.log(a,this),a.preventDefault();var b=g(this),c=b.attr("href"),d={url:c};return e.playTrack(d,function(){console.log("Playing "+c)}),!1})},f.Player=e,g(document).ready(function(){f.Player.updatePlaylist()})}(_,window,window.soundManager,window.SC),function(a,b){"use strict";function c(c){c&&a.isObject(c)&&(e.innerHTML=c.htmlList.outerHTML,console.log(c),b.app.Player.updatePlaylist())}function d(a){a&&(e.innerHTML=a)}var e=document.getElementById("shared-links");new b.app.CommentsParser({url:"https://api.github.com/repos/tastejs/TasteMusic/issues/1/comments",done:c,fail:d}).parse()}(_,window);